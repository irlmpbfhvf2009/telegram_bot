var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{T as r}from"./index.1ae80648.js";import{u as n,g as s}from"./app.d7951589.js";import{d as i,L as u,r as d,_ as m,a as c,o as f,c as p,w as g,b,g as y,t as h,l as v,e as w,F as C,f as T,h as k,i as D,j as x,k as _}from"./index.202de73a.js";const j=[{value:1,label:"运动"},{value:2,label:"健身"},{value:3,label:"跑酷"},{value:4,label:"街舞"}],F=[{value:1,label:"开启"},{value:2,label:"关闭"}],O=i({components:{Layer:u},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const l=d(null),t=d(null);let o=d({name:""});return e.layer.row&&(o.value=JSON.parse(JSON.stringify(e.layer.row)),console.log(o.value)),{form:o,rules:{key:[{required:!0,message:"请输入值",trigger:"blur"}],value:[{required:!0,message:"请输入数字",trigger:"blur"}],radio:[{required:!0,message:"请选择",trigger:"blur"}]},layerDom:t,ruleForm:l,selectData:j,radioData:F}},methods:{submit(){this.ruleForm&&this.ruleForm.validate((e=>{if(!e)return!1;{let e=this.form;this.layer.row&&this.updateForm(e)}}))},addForm(e){add(e).then((e=>{this.$message({type:"success",message:"新增成功"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()}))},updateForm(e){n(e).then((e=>{this.$message({type:"success",message:"编辑成功"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()}))}}});const S=i({name:"crudTable",components:{Table:r,Layer:m(O,[["render",function(e,a,l,t,o,r){const n=c("el-form-item"),s=c("el-input"),i=c("el-radio"),u=c("el-radio-group"),d=c("el-form"),m=c("Layer",!0);return f(),p(m,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:g((()=>[b(d,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:g((()=>[b(n,{label:"参数名称：",prop:"key"},{default:g((()=>[y(h(e.form.key),1)])),_:1}),"开启"!=e.form.value&&"关闭"!=e.form.value&&"机器人名称"!=e.form.key?(f(),p(n,{key:0,label:"值：",prop:"value"},{default:g((()=>[b(s,{modelValue:e.form.value,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.value=a),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:""},null,8,["modelValue"])])),_:1})):v("",!0),"开启"==e.form.value||"关闭"==e.form.value&&"机器人名称"!=e.form.key?(f(),p(n,{key:1,label:"状态：",prop:"value"},{default:g((()=>[b(u,{modelValue:e.form.value,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.value=a)},{default:g((()=>[(f(!0),w(C,null,T(e.radioData,(e=>(f(),p(i,{key:e.value,label:e.label},{default:g((()=>[y(h(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})):v("",!0)])),_:1},8,["model","rules"])])),_:1},8,["layer","onConfirm"])}]])},setup(){const e=k({input:""}),r=k({show:!1,title:"新增",showButton:!0}),n=k({index:1,size:20,total:0}),i=d(!0),u=d([]),m=d([]),c=r=>{i.value=!0,r&&(n.index=1),((e,r)=>{for(var n in r||(r={}))l.call(r,n)&&o(e,n,r[n]);if(a)for(var n of a(r))t.call(r,n)&&o(e,n,r[n])})({page:n.index,pageSize:n.size},e),s().then((e=>{let a=e.data.list;console.log(e.data.list),Array.isArray(a)&&a.forEach((e=>{const a=j.find((a=>a.value===e));e=a?a.label:e.choose})),console.log(e.data.list.length);for(var l=0;l<e.data.list.length;l++)"True"==e.data.list[l].value&&(e.data.list[l].value="开启"),"False"==e.data.list[l].value&&(e.data.list[l].value="关闭");u.value=e.data.list})).catch((e=>{u.value=[],n.index=1,n.total=0})).finally((()=>{i.value=!1}))};return c(!0),{query:e,tableData:u,chooseData:m,loading:i,page:n,layer:r,handleSelectionChange:e=>{m.value=e},handleEdit:e=>{r.title="编辑数据",r.row=e,r.show=!0},getTableConfig:c}}}),V={class:"layout-container"},q={class:"layout-container-form flex space-between"},L={class:"layout-container-form-search"},E={class:"layout-container-table"};var G=m(S,[["render",function(e,a,l,t,o,r){const n=c("el-input"),s=c("el-button"),i=c("el-table-column"),u=c("Table"),d=c("Layer"),m=D("loading");return f(),w("div",V,[x("div",q,[x("div",L,[b(n,{modelValue:e.query.input,"onUpdate:modelValue":a[0]||(a[0]=a=>e.query.input=a),placeholder:"请输入关键词进行检索",onChange:a[1]||(a[1]=a=>e.getTableConfig(!0))},null,8,["modelValue"]),b(s,{type:"primary",icon:"el-icon-search",class:"search-btn",onClick:a[2]||(a[2]=a=>e.getTableConfig(!0))},{default:g((()=>[y("搜索")])),_:1})])]),x("div",E,[_((f(),p(u,{ref:"table",page:e.page,"onUpdate:page":a[3]||(a[3]=a=>e.page=a),showIndex:!0,showSelection:!1,data:e.tableData,onGetTableConfig:e.getTableConfig,onSelectionChange:e.handleSelectionChange},{default:g((()=>[b(i,{prop:"key",label:"参数名称",align:"center"}),b(i,{prop:"value",label:"值",align:"center"}),b(i,{label:"操作",align:"center",fixed:"right",width:"200"},{default:g((a=>[b(s,{onClick:l=>e.handleEdit(a.row)},{default:g((()=>[y("编辑")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["page","data","onGetTableConfig","onSelectionChange"])),[[m,e.loading]]),e.layer.show?(f(),p(d,{key:0,layer:e.layer,onGetTableConfig:e.getTableConfig},null,8,["layer","onGetTableConfig"])):v("",!0)])])}]]);export{G as default};
